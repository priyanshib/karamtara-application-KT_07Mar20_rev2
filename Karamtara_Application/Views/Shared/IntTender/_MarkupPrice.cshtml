@using Karamtara_Application.Models.Tender
@model IntMarkupModel
@using System.Dynamic;
@{
    dynamic dynamic = new ExpandoObject();
    MarkupDetails markupModel = null;
    decimal value = 0;
}

<div class="BomRefDtls">
    <div class="closeMenu">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
        </button>
    </div>
    <div class="col-sm-12 row BomRefHeader m-0">
        ADD MARK UPS
    </div>
    @Html.HiddenFor(x => x.AdvBGpercent, new { @id = "AdvBGpercentMrkp" })
    @using (Html.BeginForm("SaveMarkupCharges", "IntTenderPricing", FormMethod.Post, new { @id = "MarkupPricingForm", @autocomplete = "off" }))
    {
        <div class="col-sm-12 row BomRefItem m-0">
            <div class="col-sm-8 ">
                <div class="row addMarkInput">
                    <div class="col-sm-4">
                        Rate of Interest
                        @{
                            value = 0;
                            if (Model.TenderDetails != null && Model.TenderDetails.Any())
                            {
                                dynamic = new ExpandoObject();
                                dynamic = Model.TenderDetails.Where(x => x.Description == "IntRate").FirstOrDefault();
                                value = dynamic == null ? 0 : dynamic.Value;
                            }
                        }
                        <p class="d-flex align-items-center mt-1"><input name="IntRate" onblur="SetValues()" value="@value" type="number" id="IntRate" />%</p>
                    </div>
                    <div class="col-sm-4">
                        Packing Material Weight as Percentage
                        @{
                            value = 0;
                            if (Model.TenderDetails != null && Model.TenderDetails.Any())
                            {
                                dynamic = new ExpandoObject();
                                dynamic = Model.TenderDetails.Where(x => x.Description == "PackingPercentage").FirstOrDefault();
                                value = dynamic == null ? 0 : dynamic.Value;
                                if (value > 0) { value = (value - 1) * 100; }

                            }
                        }
                        <p class="d-flex align-items-center mt-1"><input name="PackingPercentage" onblur="SetFrtValues()" value="@value" type="number" id="PackingPercentage" />%</p>
                    </div>
                </div>
            </div>
            <div class="col-sm-4 text-right">
                <button type="button" class="submitEnq revisionBtn" onclick="closeModal()">Cancel</button>
                <button type="button" id="btnSubmitMarkup" class="submitEnq publishBtn">Submit</button>
            </div>
        </div>

        <div class="tableBlock TenderDtlModelTable MarkupPricingCharges intMarkupTable">

            <input type="hidden" name="tndId" id="markupTndId" />
            <input type="hidden" name="tndRevId" id="markupTndRevId" />
            <table class="table m-0 markupListItems ">
                <tr>
                    <th class="markSrNo">S.NO.</th>
                    <th class="MarkUpPrc">Markup</th>
                    <th class="MarkUpPrc">Italy</th>
                    <th class="MarkUpPrc">India</th>
                    <th class="MarkUpPrc">BO</th>
                </tr>
                <tr>
                    @{
                        markupModel = new MarkupDetails();
                        if (Model.MarkupDetails != null && Model.MarkupDetails.Any())
                        {
                            markupModel = Model.MarkupDetails.Where(x => x.MarkupId == 10).FirstOrDefault() ?? new MarkupDetails();
                        }
                    }
                    <td class="markSrNo">1</td>
                    <td class="MarkUpName">

                        <div class="col-sm-12 p-0">
                            <div class="row">
                                <div class="col-sm-8 d-flex align-items-center">
                                    Financing
                                </div>
                                <div class="col-sm-4 d-flex align-items-center">
                                    @*<div class="row">
                                        <div class="col-sm-8 pr-3 d-flex align-items-center  justify-content-center">*@
                                    @{
                                        value = 0;
                                        if (Model.TenderDetails != null && Model.TenderDetails.Any())
                                        {
                                            dynamic = new ExpandoObject();
                                            dynamic = Model.TenderDetails.Where(x => x.Description == "FinancingDays").FirstOrDefault();
                                            value = dynamic == null ? 0 : dynamic.Value;
                                        }
                                    }
                                    @Html.TextBox("FinancingDays", value, new { @id = "FinancingDays", @type = "number", @onblur = "SetValues()", @class = "whiteBgInput" })days
                                    @*</div>
                                            <div class="col-sm-4 d-flex align-items-center p-0 justify-content-center">

                                            </div>
                                        </div>*@
                                </div>
                            </div>
                        </div>

                    </td>
                    <td class="MarkUpPrc">
                        @Html.Hidden("Financing", 10)
                        @Html.TextBox("Financing", markupModel.ItalyVal == "0.0000" ? "" : markupModel.ItalyVal, new { @id = "FinItaly", @readonly = "true", @onblur = "SetValues()", @type = "number", @markupId = 10, @colname = "italy" })
                    </td>
                    <td class="MarkUpPrc">@Html.TextBox("Financing", markupModel.IndiaVal == "0.0000" ? "" : markupModel.IndiaVal, new { @id = "FinInd", @readonly = "true", @onblur = "SetValues()", @type = "number", @markupId = 10, @colname = "india" }) </td>
                    <td class="MarkUpPrc">@Html.TextBox("Financing", markupModel.BOVal == "0.0000" ? "" : markupModel.BOVal, new { @id = "FinBO", @readonly = "true", @onblur = "SetValues()", @type = "number", @markupId = 10, @colname = "bo" }) </td>
                </tr>
                <tr>
                    @{
                        markupModel = new MarkupDetails();
                        if (Model.MarkupDetails != null && Model.MarkupDetails.Any())
                        {
                            markupModel = Model.MarkupDetails.Where(x => x.MarkupId == 11).FirstOrDefault() ?? new MarkupDetails();
                        }
                    }
                    <td class="markSrNo">2</td>
                    <td class="MarkUpName">Packing</td>
                    <td class="MarkUpPrc">
                        @Html.Hidden("Packing", 11)
                        @Html.TextBox("Packing", markupModel.ItalyVal == "0.0000" ? "" : markupModel.ItalyVal, new { @id = "PackingItaly", @onblur = "SetValues()", @type = "number", @markupId = 11, @colname = "italy", @class = "whiteBgInput" })
                    </td>
                    <td class="MarkUpPrc">@Html.TextBox("Packing", markupModel.IndiaVal == "0.0000" ? "" : markupModel.IndiaVal, new { @id = "PackingInd", @onblur = "SetValues()", @type = "number", @markupId = 11, @colname = "india", @class = "whiteBgInput" }) </td>
                    <td class="MarkUpPrc">@Html.TextBox("Packing", markupModel.BOVal == "0.0000" ? "" : markupModel.BOVal, new { @id = "PackingBO", @onblur = "SetValues()", @type = "number", @markupId = 11, @colname = "bo", @class = "whiteBgInput" }) </td>
                </tr>
                <tr>
                    @{
                        markupModel = new MarkupDetails();
                        if (Model.MarkupDetails != null && Model.MarkupDetails.Any())
                        {
                            markupModel = Model.MarkupDetails.Where(x => x.MarkupId == 12).FirstOrDefault() ?? new MarkupDetails();
                        }
                    }
                    <td class="markSrNo">3</td>
                    <td class="MarkUpName">Local transportation</td>
                    <td class="MarkUpPrc">
                        @Html.Hidden("Localtrans", 12)
                        @Html.TextBox("Localtrans", markupModel.ItalyVal == "0.0000" ? "" : markupModel.ItalyVal, new { @id = "LocaltransItaly", @onblur = "SetValues()", @type = "number", @markupId = 12, @colname = "italy", @class = "whiteBgInput" })
                    </td>
                    <td class="MarkUpPrc">@Html.TextBox("Localtrans", markupModel.IndiaVal == "0.0000" ? "" : markupModel.IndiaVal, new { @id = "LocaltransInd", @onblur = "SetValues()", @type = "number", @markupId = 12, @colname = "india", @class = "whiteBgInput" }) </td>
                    <td class="MarkUpPrc">@Html.TextBox("Localtrans", markupModel.BOVal == "0.0000" ? "" : markupModel.BOVal, new { @id = "LocaltransBO", @onblur = "SetValues()", @type = "number", @markupId = 12, @colname = "bo", @class = "whiteBgInput" }) </td>
                </tr>
                <tr>
                    @{
                        markupModel = new MarkupDetails();
                        if (Model.MarkupDetails != null && Model.MarkupDetails.Any())
                        {
                            markupModel = Model.MarkupDetails.Where(x => x.MarkupId == 13).FirstOrDefault() ?? new MarkupDetails();
                        }
                    }
                    <td class="markSrNo">4</td>
                    <td class="MarkUpName">Overheads</td>
                    <td class="MarkUpPrc">
                        @Html.Hidden("Overheads", 13)
                        @Html.TextBox("Overheads", markupModel.ItalyVal == "0.0000" ? "" : markupModel.ItalyVal, new { @id = "OverheadsItaly", @onblur = "SetValues()", @type = "number", @markupId = 13, @colname = "italy", @class = "whiteBgInput" })
                    </td>
                    <td class="MarkUpPrc">@Html.TextBox("Overheads", markupModel.IndiaVal == "0.0000" ? "" : markupModel.IndiaVal, new { @id = "OverheadsInd", @onblur = "SetValues()", @type = "number", @markupId = 13, @colname = "india", @class = "whiteBgInput" }) </td>
                    <td class="MarkUpPrc">@Html.TextBox("Overheads", markupModel.BOVal == "0.0000" ? "" : markupModel.BOVal, new { @id = "OverheadsBO", @onblur = "SetValues()", @type = "number", @markupId = 13, @colname = "bo", @class = "whiteBgInput" }) </td>
                </tr>
                <tr>
                    @{
                        markupModel = new MarkupDetails();
                        if (Model.MarkupDetails != null && Model.MarkupDetails.Any())
                        {
                            markupModel = Model.MarkupDetails.Where(x => x.MarkupId == 14).FirstOrDefault() ?? new MarkupDetails();
                        }
                    }
                    <td class="markSrNo">5</td>
                    <td class="MarkUpName">Insurance</td>
                    <td class="MarkUpPrc">
                        @Html.Hidden("Insurance", 14)
                        @Html.TextBox("Insurance", markupModel.ItalyVal == "0.0000" ? "" : markupModel.ItalyVal, new { @id = "InsuranceItaly", @onblur = "SetValues()", @type = "number", @markupId = 14, @colname = "italy", @class = "whiteBgInput" })
                    </td>
                    <td class="MarkUpPrc">@Html.TextBox("Insurance", markupModel.IndiaVal == "0.0000" ? "" : markupModel.IndiaVal, new { @id = "InsuranceInd", @onblur = "SetValues()", @type = "number", @markupId = 14, @colname = "india", @class = "whiteBgInput" }) </td>
                    <td class="MarkUpPrc">@Html.TextBox("Insurance", markupModel.BOVal == "0.0000" ? "" : markupModel.BOVal, new { @id = "InsuranceBO", @onblur = "SetValues()", @type = "number", @markupId = 14, @colname = "bo", @class = "whiteBgInput" }) </td>
                </tr>
                <tr>
                    @{
                        markupModel = new MarkupDetails();
                        if (Model.MarkupDetails != null && Model.MarkupDetails.Any())
                        {
                            markupModel = Model.MarkupDetails.Where(x => x.MarkupId == 15).FirstOrDefault() ?? new MarkupDetails();
                        }
                    }
                    <td class="markSrNo">6</td>
                    <td class="MarkUpName">Price Variation</td>
                    <td class="MarkUpPrc">
                        @Html.Hidden("PriceVariation", 15)
                        @Html.TextBox("PriceVariation", markupModel.ItalyVal == "0.0000" ? "" : markupModel.ItalyVal, new { @id = "PriceVariationItaly", @onblur = "SetValues()", @type = "number", @markupId = 15, @colname = "italy", @class = "whiteBgInput" })
                    </td>
                    <td class="MarkUpPrc">@Html.TextBox("PriceVariation", markupModel.IndiaVal == "0.0000" ? "" : markupModel.IndiaVal, new { @id = "PriceVariationInd", @onblur = "SetValues()", @type = "number", @markupId = 15, @colname = "india", @class = "whiteBgInput" }) </td>
                    <td class="MarkUpPrc">@Html.TextBox("PriceVariation", markupModel.BOVal == "0.0000" ? "" : markupModel.BOVal, new { @id = "PriceVariationBO", @onblur = "SetValues()", @type = "number", @markupId = 15, @colname = "bo", @class = "whiteBgInput" }) </td>
                </tr>
                <tr>
                    @{
                        markupModel = new MarkupDetails();
                        if (Model.MarkupDetails != null && Model.MarkupDetails.Any())
                        {
                            markupModel = Model.MarkupDetails.Where(x => x.MarkupId == 16).FirstOrDefault() ?? new MarkupDetails();
                        }
                    }
                    <td class="markSrNo">7</td>
                    <td class="MarkUpName">PBG</td>
                    <td class="MarkUpPrc">
                        @Html.Hidden("PBG", 16)
                        @Html.TextBox("PBG", Model.PBGValue, new { @id = "PBGItaly", @readonly = "true", @type = "number", @markupId = 16, @colname = "italy" })
                    </td>
                    <td class="MarkUpPrc">@Html.TextBox("PBG", Model.PBGValue, new { @id = "PBGInd", @readonly = "true", @type = "number", @markupId = 16, @colname = "india" }) </td>
                    <td class="MarkUpPrc">@Html.TextBox("PBG", null, new { @id = "PBGBO", @readonly = "true", @type = "number", @markupId = 16, @colname = "bo" }) </td>
                </tr>
                <tr>
                    @{
                        markupModel = new MarkupDetails();
                        if (Model.MarkupDetails != null && Model.MarkupDetails.Any())
                        {
                            markupModel = Model.MarkupDetails.Where(x => x.MarkupId == 17).FirstOrDefault() ?? new MarkupDetails();
                        }
                    }
                    <td class="markSrNo">8</td>
                    <td class="MarkUpName">
                        <div class="col-sm-12 p-0">
                            <div class="row">
                                <div class="col-sm-8 d-flex align-items-center">
                                    Finance: Sales Cr.
                                </div>
                                <div class="col-sm-4 d-flex align-items-center">
                                    @*<div class="row">
                                        <div class="col-sm-8 pr-3  d-flex align-items-center">*@
                                    @{
                                        value = 0;
                                        if (Model.TenderDetails != null && Model.TenderDetails.Any())
                                        {
                                            dynamic = new ExpandoObject();
                                            dynamic = Model.TenderDetails.Where(x => x.Description == "FinSalesCrDays").FirstOrDefault();
                                            value = dynamic == null ? 0 : dynamic.Value;
                                        }
                                    }
                                    @Html.TextBox("FinSalesCrDays", value, new { @id = "FinSalesCrDays", @type = "number", @onblur = "SetValues()", @class = "whiteBgInput" })days
                                    @*</div>
                                            <div class="col-sm-4 d-flex align-items-center p-0 justify-content-center">

                                            </div>
                                        </div>*@
                                </div>
                            </div>
                        </div>
                    </td>
                    <td class="MarkUpPrc">
                        @Html.Hidden("FinSalesCr", 17)
                        @Html.TextBox("FinSalesCr", markupModel.ItalyVal, new { @id = "FinSalesCrItaly", @readonly = "true", @onblur = "SetValues()", @type = "number", @markupId = 17, @colname = "italy" })
                    </td>
                    <td class="MarkUpPrc">@Html.TextBox("FinSalesCr", markupModel.IndiaVal, new { @id = "FinSalesCrInd", @readonly = "true", @onblur = "SetValues()", @type = "number", @markupId = 17, @colname = "india" }) </td>
                    <td class="MarkUpPrc">@Html.TextBox("FinSalesCr", markupModel.BOVal, new { @id = "FinSalesCrBO", @readonly = "true", @onblur = "SetValues()", @type = "number", @markupId = 17, @colname = "bo" }) </td>
                </tr>
                <tr>
                    @{
                        markupModel = new MarkupDetails();
                        if (Model.MarkupDetails != null && Model.MarkupDetails.Any())
                        {
                            markupModel = Model.MarkupDetails.Where(x => x.MarkupId == 18).FirstOrDefault() ?? new MarkupDetails();
                        }
                    }
                    <td class="markSrNo">9</td>
                    <td class="MarkUpName">
                        <div class="col-sm-12 p-0">
                            <div class="row">
                                <div class="col-sm-8 d-flex align-items-center">
                                    Interest saving on Advance
                                </div>
                                <div class="col-sm-4  p-0">
                                    <div class="row col-sm-12 m-0 d-flex align-items-center">
                                        @*<div class="col-sm-9 pl-0 pr-4 d-flex align-items-center">*@
                                        @{
                                            value = 0;
                                            if (Model.TenderDetails != null && Model.TenderDetails.Any())
                                            {
                                                dynamic = new ExpandoObject();
                                                dynamic = Model.TenderDetails.Where(x => x.Description == "InterestSaveDays").FirstOrDefault();
                                                value = dynamic == null ? 0 : dynamic.Value;
                                            }
                                        }
                                        @Html.TextBox("InterestSaveDays", value, new { @id = "InterestSaveDays", @onblur = "SetValues()", @type = "number", @class = "whiteBgInput" })days
                                        @*</div>
                                            <div class="col-sm-3 d-flex align-items-center p-0 justify-content-center">

                                            </div>*@
                                    </div>
                                    <div class="row col-sm-12 m-0 d-flex align-items-center">
                                        @*<div class="col-sm-8 p-0 pr-2 d-flex align-items-center">*@
                                        @{
                                            value = 0;
                                            if (Model.TenderDetails != null && Model.TenderDetails.Any())
                                            {
                                                dynamic = new ExpandoObject();
                                                dynamic = Model.TenderDetails.Where(x => x.Description == "InterestSaveMnths").FirstOrDefault();
                                                value = dynamic == null ? 0 : dynamic.Value;
                                            }
                                        }
                                        @Html.TextBox("InterestSaveMnths", value, new { @id = "InterestSaveMnths", @onblur = "SetValues()", @type = "number", @class = "whiteBgInput" })  months
                                        @*</div>
                                            <div class="col-sm-4 d-flex align-items-center p-0 pr-1">

                                            </div>*@
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td class="MarkUpPrc">
                        @Html.Hidden("InterestSave", 18)
                        @Html.TextBox("InterestSave", markupModel.ItalyVal, new { @id = "InterestSaveItaly", @readonly = "true", @onblur = "SetValues()", @type = "text", @markupId = 18, @colname = "italy" })
                    </td>
                    <td class="MarkUpPrc">@Html.TextBox("InterestSave", markupModel.IndiaVal, new { @id = "InterestSaveInd", @readonly = "true", @onblur = "SetValues()", @type = "text", @markupId = 18, @colname = "india" }) </td>
                    <td class="MarkUpPrc">@Html.TextBox("InterestSave", markupModel.BOVal, new { @id = "InterestSaveBO", @readonly = "true", @onblur = "SetValues()", @type = "text", @markupId = 18, @colname = "bo" }) </td>
                </tr>
                <tr id="SubtotalRow">
                    @{
                        markupModel = new MarkupDetails();
                        if (Model.MarkupDetails != null && Model.MarkupDetails.Any())
                        {
                            markupModel = Model.MarkupDetails.Where(x => x.MarkupId == 19).FirstOrDefault() ?? new MarkupDetails();
                        }
                    }
                    <td class="markSrNo">10</td>
                    <td class="MarkUpName">Subtotal</td>
                    <td class="MarkUpPrc">
                        @Html.Hidden("Subtotal", 19)
                        @Html.TextBox("Subtotal", markupModel.ItalyVal, new { @id = "SubtotalItaly", @readonly = "true", @type = "number", @markupId = 19, @colname = "italy" })
                    </td>
                    <td class="MarkUpPrc">@Html.TextBox("Subtotal", markupModel.IndiaVal, new { @id = "SubtotalInd", @readonly = "true", @type = "number", @markupId = 19, @colname = "india" }) </td>
                    <td class="MarkUpPrc">@Html.TextBox("Subtotal", markupModel.BOVal, new { @id = "SubtotalBO", @readonly = "true", @type = "number", @markupId = 19, @colname = "bo" }) </td>
                </tr>
                <tr>
                    @{
                        markupModel = new MarkupDetails();
                        if (Model.MarkupDetails != null && Model.MarkupDetails.Any())
                        {
                            markupModel = Model.MarkupDetails.Where(x => x.MarkupId == 20).FirstOrDefault() ?? new MarkupDetails();
                        }
                    }
                    <td class="markSrNo">11</td>
                    <td class="MarkUpName">Testing</td>
                    <td class="MarkUpPrc">
                        @Html.Hidden("Testing", 20)
                        @Html.TextBox("Testing", markupModel.ItalyVal, new { @id = "TestingItaly", @readonly = "true", @type = "number", @markupId = 20, @colname = "italy" })
                    </td>
                    <td class="MarkUpPrc">@Html.TextBox("Testing", markupModel.IndiaVal, new { @id = "TestingInd", @readonly = "true", @type = "number", @markupId = 20, @colname = "india" }) </td>
                    <td class="MarkUpPrc">@Html.TextBox("Testing", markupModel.BOVal, new { @id = "TestingBO", @readonly = "true", @type = "number", @markupId = 20, @colname = "bo" }) </td>
                </tr>
                <tr>
                    @{
                        markupModel = new MarkupDetails();
                        if (Model.MarkupDetails != null && Model.MarkupDetails.Any())
                        {
                            markupModel = Model.MarkupDetails.Where(x => x.MarkupId == 21).FirstOrDefault() ?? new MarkupDetails();
                        }
                    }
                    <td class="markSrNo">12</td>
                    <td class="MarkUpName">Override Testing</td>
                    <td class="MarkUpPrc">
                        @Html.Hidden("OverrideTest", 21)
                        @Html.TextBox("OverrideTest", markupModel.ItalyVal == "0.0000" ? "" : markupModel.ItalyVal, new { @id = "OverrideTestItaly", @onblur = "SetValues()", @type = "number", @markupId = 21, @colname = "italy", @class = "whiteBgInput" })
                    </td>
                    <td class="MarkUpPrc">@Html.TextBox("OverrideTest", markupModel.IndiaVal == "0.0000" ? "" : markupModel.IndiaVal, new { @id = "OverrideTestInd", @onblur = "SetValues()", @type = "number", @markupId = 21, @colname = "india", @class = "whiteBgInput" }) </td>
                    <td class="MarkUpPrc">@Html.TextBox("OverrideTest", markupModel.BOVal == "0.0000" ? "" : markupModel.BOVal, new { @id = "OverrideTestBO", @onblur = "SetValues()", @type = "number", @markupId = 21, @colname = "bo", @class = "whiteBgInput" }) </td>
                </tr>
                <tr>
                    @{
                        markupModel = new MarkupDetails();
                        if (Model.MarkupDetails != null && Model.MarkupDetails.Any())
                        {
                            markupModel = Model.MarkupDetails.Where(x => x.MarkupId == 22).FirstOrDefault() ?? new MarkupDetails() ?? new MarkupDetails();
                        }
                    }
                    <td class="markSrNo">13</td>
                    <td class="MarkUpName">Remarks</td>
                    <td class="MarkUpPrc">
                        @Html.Hidden("Remarks", 22)
                        @Html.TextBox("Remarks", markupModel.ItalyVal == "0.0000" ? "" : markupModel.ItalyVal, new { @id = "RemarksItaly", @type = "text", @markupId = 22, @colname = "italy", @class = "whiteBgInput" })
                    </td>
                    <td class="MarkUpPrc">@Html.TextBox("Remarks", markupModel.IndiaVal == "0.0000" ? "" : markupModel.IndiaVal, new { @id = "RemarksInd", @type = "text", @markupId = 22, @colname = "india", @class = "whiteBgInput" }) </td>
                    <td class="MarkUpPrc">@Html.TextBox("Remarks", markupModel.BOVal == "0.0000" ? "" : markupModel.BOVal, new { @id = "RemarksBO", @type = "text", @markupId = 22, @colname = "bo", @class = "whiteBgInput" }) </td>
                </tr>
                <tr>
                    @{
                        markupModel = new MarkupDetails();
                        if (Model.MarkupDetails != null && Model.MarkupDetails.Any())
                        {
                            markupModel = Model.MarkupDetails.Where(x => x.MarkupId == 23).FirstOrDefault() ?? new MarkupDetails();
                        }
                    }
                    <td class="markSrNo">14</td>
                    <td class="MarkUpName">
                        Travel, Lodging & Boarding
                        <img src="~/Assets/images/plusPubIcon.png" onclick="OpenTravelLBModal()" />
                        @{
                            value = 0;
                            if (Model.TenderDetails != null && Model.TenderDetails.Any())
                            {
                                dynamic = new ExpandoObject();
                                dynamic = Model.TenderDetails.Where(x => x.Description == "NoOfPersons").FirstOrDefault();
                                value = dynamic == null ? 0 : dynamic.Value;
                            }
                        }
                        <input type="hidden" id="NoOfPersons" name="NoOfPersons" value="@value" />
                        @{
                            value = 0;
                            if (Model.TenderDetails != null && Model.TenderDetails.Any())
                            {
                                dynamic = new ExpandoObject();
                                dynamic = Model.TenderDetails.Where(x => x.Description == "NoOfDays").FirstOrDefault();
                                value = dynamic == null ? 0 : dynamic.Value;
                            }
                        }
                        <input type="hidden" id="NoOfDays" name="NoOfDays" value="@value" />
                        @{
                            value = 0;
                            if (Model.TenderDetails != null && Model.TenderDetails.Any())
                            {
                                dynamic = new ExpandoObject();
                                dynamic = Model.TenderDetails.Where(x => x.Description == "Fare").FirstOrDefault();
                                value = dynamic == null ? 0 : dynamic.Value;
                            }
                        }
                        <input type="hidden" id="Fare" name="Fare" value="@value" />
                        @{
                            value = 0;
                            if (Model.TenderDetails != null && Model.TenderDetails.Any())
                            {
                                dynamic = new ExpandoObject();
                                dynamic = Model.TenderDetails.Where(x => x.Description == "Lodging").FirstOrDefault();
                                value = dynamic == null ? 0 : dynamic.Value;
                            }
                        }
                        <input type="hidden" id="Lodging" name="Lodging" value="@value" />
                    </td>
                    <td class="MarkUpPrc">
                        @Html.Hidden("TravelLB", 23)
                        @Html.TextBox("TravelLB", markupModel.ItalyVal, new { @id = "TravelLBItaly", @readonly = "true", @type = "number", @markupId = 23, @colname = "italy" })
                    </td>
                    <td class="MarkUpPrc">@Html.TextBox("TravelLB", markupModel.IndiaVal, new { @id = "TravelLBInd", @readonly = "true", @type = "number", @markupId = 23, @colname = "india" }) </td>
                    <td class="MarkUpPrc">@Html.TextBox("TravelLB", markupModel.BOVal, new { @id = "TravelLBBO", @readonly = "true", @type = "number", @markupId = 23, @colname = "bo" }) </td>
                </tr>
                <tr>
                    @{
                        markupModel = new MarkupDetails();
                        if (Model.MarkupDetails != null && Model.MarkupDetails.Any())
                        {
                            markupModel = Model.MarkupDetails.Where(x => x.MarkupId == 24).FirstOrDefault() ?? new MarkupDetails();
                        }
                    }
                    <td class="markSrNo">15</td>
                    <td class="MarkUpName">Development</td>
                    <td class="MarkUpPrc">
                        @Html.Hidden("Development", 24)
                        @Html.TextBox("Development", markupModel.ItalyVal == "0.0000" ? "" : markupModel.ItalyVal, new { @id = "DevItaly", @onblur = "SetValues()", @type = "number", @markupId = 24, @colname = "italy", @class = "whiteBgInput" })
                    </td>
                    <td class="MarkUpPrc">@Html.TextBox("Development", markupModel.IndiaVal == "0.0000" ? "" : markupModel.IndiaVal, new { @id = "DevInd", @onblur = "SetValues()", @type = "number", @markupId = 24, @colname = "india", @class = "whiteBgInput" }) </td>
                    <td class="MarkUpPrc">@Html.TextBox("Development", markupModel.BOVal == "0.0000" ? "" : markupModel.BOVal, new { @id = "DevBO", @onblur = "SetValues()", @type = "number", @markupId = 24, @colname = "bo", @class = "whiteBgInput" }) </td>
                </tr>
                <tr>
                    @{
                        markupModel = new MarkupDetails();
                        if (Model.MarkupDetails != null && Model.MarkupDetails.Any())
                        {
                            markupModel = Model.MarkupDetails.Where(x => x.MarkupId == 25).FirstOrDefault() ?? new MarkupDetails();
                        }
                    }
                    <td class="markSrNo">16</td>
                    <td class="MarkUpName">Other Total (A)</td>
                    <td class="MarkUpPrc">
                        @Html.Hidden("Total", 25)
                        @Html.TextBox("Total", markupModel.ItalyVal, new { @id = "TotalItaly", @type = "number", @readonly = "true", @markupId = 25, @colname = "italy" })
                    </td>
                    <td class="MarkUpPrc">@Html.TextBox("Total", markupModel.IndiaVal, new { @id = "TotalInd", @type = "number", @readonly = "true", @markupId = 25, @colname = "india" }) </td>
                    <td class="MarkUpPrc">@Html.TextBox("Total", markupModel.BOVal, new { @id = "TotalBO", @type = "number", @readonly = "true", @markupId = 25, @colname = "bo" }) </td>
                </tr>
                <tr>
                    @{
                        markupModel = new MarkupDetails();
                        if (Model.MarkupDetails != null && Model.MarkupDetails.Any())
                        {
                            markupModel = Model.MarkupDetails.Where(x => x.MarkupId == 26).FirstOrDefault() ?? new MarkupDetails();
                        }
                    }
                    <td class="markSrNo">17</td>
                    <td class="MarkUpName">Testing Cost as Percentage of RM Cost (B)</td>
                    <td class="MarkUpPrc">
                        @Html.Hidden("PercUnitCost", 26)
                        @Html.TextBox("PercUnitCost", markupModel.ItalyVal, new { @id = "PercUnitCostItaly", @readonly = "true", @type = "number", @markupId = 26, @colname = "italy" })
                    </td>
                    <td class="MarkUpPrc">@Html.TextBox("PercUnitCost", markupModel.IndiaVal, new { @id = "PercUnitCostInd", @readonly = "true", @type = "number", @markupId = 26, @colname = "india" }) </td>
                    <td class="MarkUpPrc">@Html.TextBox("PercUnitCost", markupModel.BOVal, new { @id = "PercUnitCostBO", @readonly = "true", @type = "number", @markupId = 26, @colname = "bo" }) </td>
                </tr>
                <tr>
                    @{
                        markupModel = new MarkupDetails();
                        if (Model.MarkupDetails != null && Model.MarkupDetails.Any())
                        {
                            markupModel = Model.MarkupDetails.Where(x => x.MarkupId == 27).FirstOrDefault() ?? new MarkupDetails();
                        }
                    }
                    <td class="markSrNo">18</td>
                    <td class="MarkUpName">Total</td>
                    <td class="MarkUpPrc">
                        @Html.Hidden("FinalTot", 27)
                        @Html.TextBox("FinalTot", markupModel.ItalyVal, new { @id = "FinalTotItaly", @readonly = "true", @type = "number", @markupId = 27, @colname = "italy" })
                    </td>
                    <td class="MarkUpPrc">@Html.TextBox("FinalTot", markupModel.IndiaVal, new { @id = "FinalTotInd", @readonly = "true", @type = "number", @markupId = 27, @colname = "india" }) </td>
                    <td class="MarkUpPrc">@Html.TextBox("FinalTot", markupModel.BOVal, new { @id = "FinalTotBO", @readonly = "true", @type = "number", @markupId = 27, @colname = "bo" }) </td>
                </tr>
                <tr>
                    @{
                        markupModel = new MarkupDetails();
                        if (Model.MarkupDetails != null && Model.MarkupDetails.Any())
                        {
                            markupModel = Model.MarkupDetails.Where(x => x.MarkupId == 28).FirstOrDefault() ?? new MarkupDetails();
                        }
                    }
                    <td class="markSrNo">19</td>
                    <td class="MarkUpName">Contingency</td>
                    <td class="MarkUpPrc">
                        @Html.Hidden("Contingency", 28)
                        @Html.TextBox("Contingency", markupModel.ItalyVal == "0.0000" ? "" : markupModel.ItalyVal, new { @id = "ContingencyItaly", @onblur = "SetTotalMarkup()", @type = "number", @markupId = 28, @colname = "italy", @class = "whiteBgInput" })
                    </td>
                    <td class="MarkUpPrc">@Html.TextBox("Contingency", markupModel.IndiaVal == "0.0000" ? "" : markupModel.IndiaVal, new { @id = "ContingencyInd", @onblur = "SetTotalMarkup()", @type = "number", @markupId = 28, @colname = "india", @class = "whiteBgInput" }) </td>
                    <td class="MarkUpPrc">@Html.TextBox("Contingency", markupModel.BOVal == "0.0000" ? "" : markupModel.BOVal, new { @id = "ContingencyBO", @onblur = "SetTotalMarkup()", @type = "number", @markupId = 28, @colname = "bo", @class = "whiteBgInput" }) </td>
                </tr>
                <tr>
                    @{
                        markupModel = new MarkupDetails();
                        if (Model.MarkupDetails != null && Model.MarkupDetails.Any())
                        {
                            markupModel = Model.MarkupDetails.Where(x => x.MarkupId == 29).FirstOrDefault() ?? new MarkupDetails();
                        }
                    }
                    <td class="markSrNo">20</td>
                    <td class="MarkUpName">Margin</td>
                    <td class="MarkUpPrc">
                        @Html.Hidden("Margin", 29)
                        @Html.TextBox("Margin", markupModel.ItalyVal == "0.0000" ? "" : markupModel.ItalyVal, new { @id = "MarginItaly", @onblur = "SetTotalMarkup()", @type = "number", @markupId = 29, @colname = "italy", @class = "whiteBgInput" })
                    </td>
                    <td class="MarkUpPrc">@Html.TextBox("Margin", markupModel.IndiaVal == "0.0000" ? "" : markupModel.IndiaVal, new { @id = "MarginInd", @onblur = "SetTotalMarkup()", @type = "number", @markupId = 29, @colname = "india", @class = "whiteBgInput" }) </td>
                    <td class="MarkUpPrc">@Html.TextBox("Margin", markupModel.BOVal == "0.0000" ? "" : markupModel.BOVal, new { @id = "MarginBO", @onblur = "SetTotalMarkup()", @type = "number", @markupId = 29, @colname = "bo", @class = "whiteBgInput" }) </td>
                </tr>
                <tr>
                    @{
                        markupModel = new MarkupDetails();
                        if (Model.MarkupDetails != null && Model.MarkupDetails.Any())
                        {
                            markupModel = Model.MarkupDetails.Where(x => x.MarkupId == 30).FirstOrDefault() ?? new MarkupDetails();
                        }
                    }
                    <td class="markSrNo">21</td>
                    <td class="MarkUpName">Agency Commission</td>
                    <td class="MarkUpPrc">
                        @Html.Hidden("AgencyComm", 30)
                        @Html.TextBox("AgencyComm", markupModel.ItalyVal == "0.0000" ? "" : markupModel.ItalyVal, new { @id = "AgencyCommItaly", @onblur = "SetTotalMarkup()", @type = "number", @markupId = 30, @colname = "italy", @class = "whiteBgInput" })
                    </td>
                    <td class="MarkUpPrc">@Html.TextBox("AgencyComm", markupModel.IndiaVal == "0.0000" ? "" : markupModel.IndiaVal, new { @id = "AgencyCommInd", @onblur = "SetTotalMarkup()", @type = "number", @markupId = 30, @colname = "india", @class = "whiteBgInput" }) </td>
                    <td class="MarkUpPrc">@Html.TextBox("AgencyComm", markupModel.BOVal == "0.0000" ? "" : markupModel.BOVal, new { @id = "AgencyCommBO", @onblur = "SetTotalMarkup()", @type = "number", @markupId = 30, @colname = "bo", @class = "whiteBgInput" }) </td>
                </tr>
                <tr>
                    @{
                        markupModel = new MarkupDetails();
                        if (Model.MarkupDetails != null && Model.MarkupDetails.Any())
                        {
                            markupModel = Model.MarkupDetails.Where(x => x.MarkupId == 31).FirstOrDefault() ?? new MarkupDetails();
                        }
                    }
                    <td class="markSrNo">22</td>
                    <td class="MarkUpName">Total Margin </td>
                    <td class="MarkUpPrc">
                        @Html.Hidden("TotMargin", 31)
                        @Html.TextBox("TotMargin", markupModel.ItalyVal, new { @id = "TotMarginItaly", @readonly = "true", @type = "number", @markupId = 31, @colname = "italy" })
                    </td>
                    <td class="MarkUpPrc">@Html.TextBox("TotMargin", markupModel.IndiaVal, new { @id = "TotMarginInd", @readonly = "true", @type = "number", @markupId = 31, @colname = "india" }) </td>
                    <td class="MarkUpPrc">@Html.TextBox("TotMargin", markupModel.BOVal, new { @id = "TotMarginBO", @readonly = "true", @type = "number", @markupId = 31, @colname = "bo" }) </td>
                </tr>
                <tr>
                    @{
                        markupModel = new MarkupDetails();
                        if (Model.MarkupDetails != null && Model.MarkupDetails.Any())
                        {
                            markupModel = Model.MarkupDetails.Where(x => x.MarkupId == 32).FirstOrDefault() ?? new MarkupDetails();
                        }
                    }
                    <td class="markSrNo">23</td>
                    <td class="MarkUpName">Negotiation</td>
                    <td class="MarkUpPrc">
                        @Html.Hidden("Negotation", 32)
                        @Html.TextBox("Negotation", markupModel.ItalyVal == "0.0000" ? "" : markupModel.ItalyVal, new { @id = "NegotationItaly", @type = "number", @markupId = 32, @colname = "italy", @class = "whiteBgInput" })
                    </td>
                    <td class="MarkUpPrc">@Html.TextBox("Negotation", markupModel.IndiaVal == "0.0000" ? "" : markupModel.IndiaVal, new { @id = "NegotationInd", @type = "number", @markupId = 32, @colname = "india", @class = "whiteBgInput" }) </td>
                    <td class="MarkUpPrc">@Html.TextBox("Negotation", markupModel.BOVal == "0.0000" ? "" : markupModel.BOVal, new { @id = "NegotationBO", @type = "number", @markupId = 32, @colname = "bo", @class = "whiteBgInput" }) </td>
                </tr>
            </table>

        </div>
    }
</div>

<script>

    var tndType = @Model.TndType;

    //$(document).ready(function () {
    SetValues();

    $("#markupTndId").val($("#tndId").val());
    $("#markupTndRevId").val($("#tndRevId").val());

    $("td").filter(function () {
        return $(this).text().toLowerCase() == 'pbg';
    }).nextAll().find("input").attr('readonly', 'readonly');

    if ($("#isPageEditable").val() != "True" && $("#isPageEditable").val() != "true") {
        $("input").attr('readonly', true);
        $(".ModelFooter").find(".whiteBgInput").css("font-weight", "bold");
        $(".ModelFooter").find(".whiteBgInput").css("color", "#fff");
        $("input").removeClass("whiteBgInput");
        $("input").removeClass("p-1");
        $("button").not(".close").hide();
        $("input[type='button']").hide();
    }
    //});

    $("#btnSubmitMarkup").click(function () {

        jQuery(".MarkupPricingCharges").find("input[type='number']").filter(function () {
            return this.value == "";
        }).val(0);

        jQuery("input[name='InterestSave']").filter(function () {
            return this.value == "";
        }).val(0);

        jQuery(".MarkupPricingCharges").find("input[type='text']").not("input[name='InterestSave']").filter(function () {
            return $(this).val() == "";
        }).val("-");

        var form = $("#MarkupPricingForm").serialize();

        $.ajax({
            type: "post",
            url: '/IntTenderPricingKT/SaveMarkupPricing',
            dataType: "json",
            data: form,
            async: false,
            success: function (data) {
                debugger;
                if (data) {
                    $(".modal").modal('hide');
                    //successModal();
                    //window.location.reload();
                    SubmitFreight();
                    window.location.reload();
                }
                else {
                    failureModal();
                }
            },
            error: function (courses) {
                failureModal();
            }
        });
    });

    function SetValues() {
        var interestRate, financingDays, finSalesCrDays, interestSaveDays, interestSaveMnths, financing, finSalesCr, interestSave, value;

        interestRate = Number($("#IntRate").val());
        financingDays = Number($("#FinancingDays").val());
        finSalesCrDays = Number($("#FinSalesCrDays").val());
        interestSaveDays = Number($("#InterestSaveDays").val());
        interestSaveMnths = Number($("#InterestSaveMnths").val());

        financing = (interestRate / 360) * financingDays;
        $("#FinInd").val(financing.toFixed(3));
        $("#FinItaly,#FinBO").val(0).removeClass("whiteBgInput").attr("readonly", true);

        finSalesCr = (interestRate / 360) * finSalesCrDays;
        $("#FinSalesCrInd").val(finSalesCr.toFixed(3));
        $("#FinSalesCrItaly,#FinSalesCrBO").val(0).removeClass("whiteBgInput").attr("readonly", true);

        interestSave = Number($("#AdvBGpercentMrkp").val()) * (interestRate / 1200) * interestSaveMnths;

        if (interestSave > 0)
            value = "-" + interestSave.toFixed(3).toString();
        else
            value = 0;
        if (tndType == 1) {
            $("#InterestSaveInd").val(value);
            $("#InterestSaveItaly,#InterestSaveBO").val(0).removeClass("whiteBgInput").attr("readonly", true);
            $("#PBGItaly").val('');
        } else {
            $("#InterestSaveItaly").val(value);
            $("#InterestSaveInd,#InterestSaveBO").val(0).removeClass("whiteBgInput").attr("readonly", true);
            $("#PBGInd").val('');
        }

        SetSubTotal();
        SetTotal();
        SetPercentUnitCost();
        SetFinalTotal();
        SetTotalMarkup();

        if (tndType == 1) {
            $("#TravelLBItaly").val("");
            $("#TravelLBBO").val("");
        } else {
            $("#TravelLBInd").val("");
            $("#TravelLBBO").val("");
        }
    }

    function SetSubTotal() {
        var sum = 0, elements;
        elements = $("#SubtotalRow").prevAll().find("input[colname='india']");
        $.each(elements, function (index, ele) {
            sum += Number($(ele).val());
        });
        $("#SubtotalInd").val(sum.toFixed(3));

        sum = 0;
        elements = $("#SubtotalRow").prevAll().find("input[colname='italy']");
        $.each(elements, function (index, ele) {
            sum += Number($(ele).val());
        });
        $("#SubtotalItaly").val(sum.toFixed(3));

        sum = 0;
        elements = $("#SubtotalRow").prevAll().find("input[colname='bo']");
        $.each(elements, function (index, ele) {
            sum += Number($(ele).val());
        });
        $("#SubtotalBO").val(sum.toFixed(3));
    }

    function SetTotal() {
        var value, testOverrideCharge;
        testOverrideCharge = Number($("#OverrideTestItaly").val());
        if (testOverrideCharge > 0) {
            value = Number($("#TravelLBItaly").val()) + Number($("#DevItaly").val()) + testOverrideCharge;
        } else {
            value = Number($("#TravelLBItaly").val()) + Number($("#DevItaly").val()) + Number($("#TestingItaly").val());
        }
        $("#TotalItaly").val(value.toFixed(3));

        testOverrideCharge = Number($("#OverrideTestInd").val());
        if (testOverrideCharge > 0) {
            value = Number($("#TravelLBInd").val()) + Number($("#DevInd").val()) + testOverrideCharge;
        } else {
            value = Number($("#TravelLBInd").val()) + Number($("#DevInd").val()) + Number($("#TestingInd").val());
        }
        $("#TotalInd").val(value.toFixed(3));

        testOverrideCharge = Number($("#OverrideTestBO").val());
        if (testOverrideCharge > 0) {
            value = Number($("#TravelLBBO").val()) + Number($("#DevBO").val()) + testOverrideCharge;
        } else {
            value = Number($("#TravelLBBO").val()) + Number($("#DevBO").val()) + Number($("#TestingBO").val());
        }
        $("#TotalBO").val(value.toFixed(3));
    }

    function SetPercentUnitCost() {
        var totalCost, finalTotalInd, value, total, subTotalInd;
        //
        totalCost = Number($("#totalCostINR").val());
        total = Number($("#TotalInd").val());

        value = (total / totalCost) * 100;
        $("#PercUnitCostInd").val(value.toFixed(2));

        subTotalInd = Number($("#SubtotalInd").val());
        finalTotalInd = 1 + ((subTotalInd + value) / 100);

        $("#FinalTotInd").val(finalTotalInd.toFixed(4));

        total = Number($("#TotalItaly").val());
        value = (total / (totalCost * finalTotalInd)) * 100;
        $("#PercUnitCostItaly").val(value.toFixed(2));

    }

    function SetFinalTotal() {
        var value, percentUnitCost, subTotal;

        subTotal = Number($("#SubtotalInd").val());
        percentUnitCost = Number($("#PercUnitCostInd").val());
        value = 1 + ((subTotal + percentUnitCost) / 100);
        $("#FinalTotInd").val(value.toFixed(4));

        subTotal = Number($("#SubtotalItaly").val());
        percentUnitCost = Number($("#PercUnitCostItaly").val());
        value = 1 + ((subTotal + percentUnitCost) / 100);
        $("#FinalTotItaly").val(value.toFixed(4));

        subTotal = Number($("#SubtotalBO").val());
        percentUnitCost = Number($("#PercUnitCostBO").val());
        value = 1 + ((subTotal + percentUnitCost) / 100);
        $("#FinalTotBO").val(value.toFixed(4));
    }

    function SetTotalMarkup() {
        var value;

        value = Number($("#ContingencyItaly").val()) + Number($("#MarginItaly").val()) + Number($("#AgencyCommItaly").val());
        $("#TotMarginItaly").val(value.toFixed(2));

        value = Number($("#ContingencyInd").val()) + Number($("#MarginInd").val()) + Number($("#AgencyCommInd").val());
        $("#TotMarginInd").val(value.toFixed(2));

        value = Number($("#ContingencyBO").val()) + Number($("#MarginBO").val()) + Number($("#AgencyCommBO").val());
        $("#TotMarginBO").val(value.toFixed(2));
    }

    function OpenTravelLBModal() {
        var noOfPersons, noOfDays, fare, lodging, Fare;

        $("#testmasterDtls").css('display', "block");
        noOfPersons = $("#NoOfPersons").val();
        noOfDays = $("#NoOfDays").val();
        fare = $("#Fare").val();
        lodging = $("#Lodging").val();
        if (tndType == 1)
            Fare = '<div class="col-sm-3 d-flex align-items-center">Fare(Usd) :</div>';
        else if (tndType == 2)
            Fare = '<div class="col-sm-3 d-flex align-items-center">Fare(Euro) :</div>';
        else
            Fare = '<div class="col-sm-3 d-flex align-items-center">Fare :</div>'

        var html = '< div id = "myModal" class="modal fade" role = "dialog" >'+
               ' <div class="modal-dialog modal-dialog-centered ">'+
                '<div class="modal-content">'+
                       ' <div class="modal-body">'+
            '<div class="BomRefDtls">' +
            '<div class="col-sm-12 row BomRefHeader m-0">' +
            '<div class="col-sm-8 d-flex align-items-center">' +
            'Add Travel, Loadging & Boarding' +
            '</div>' +
            '<div class="col-sm-4 text-right">' +
            '<button type="button" class="submitEnq revisionBtn" onclick="CloseTravelLBModal()" data-dismiss="modal">Cancel</button>' +
            '<button type="button" class="submitEnq publishBtn" onclick="SetTravelLB()" data-dismiss="modal">Submit</button>' +
            '</div>' +
            '</div>' +
            '<div class="col-sm-12 m-0 testMasterheader">' +
            '<div class="row">' +
            '<div class="col-sm-3 d-flex align-items-center">No. of Persons:</div>' +
            '<div class="col-sm-8"><input type="number" class="whiteBgInput" id="txtNoOfPersons" value="' + noOfPersons + '"></div>' +
            '<div class="col-sm-3 d-flex align-items-center">No. of Days:</div>' +
            '<div class="col-sm-8"><input type="number" class="whiteBgInput" id="txtNoOfDays" value="' + noOfDays + '"></div>' +
            Fare +
            '<div class="col-sm-8"><input type="number" class="whiteBgInput" id="txtFare" value="' + fare + '"></div>' +
            '<div class="col-sm-3 d-flex align-items-center">Lodging :</div>' +
            '<div class="col-sm-8"><input type="number" class="whiteBgInput" id="txtLodging" value="' + lodging + '"></div>' +
            '</div>' +
            '</div></div></div></div></div>';

        $("#testmasterDtls").html(html);
        $("#testmasterDtls").modal('show');
    }

    function SetTravelLB() {
        var noOfPersons, noOfDays, fare, lodging,travelLB,conversionRate;
        noOfPersons = Number($("#txtNoOfPersons").val());
        noOfDays = Number($("#txtNoOfDays").val());
        fare = Number($("#txtFare").val());
        lodging = Number($("#txtLodging").val());
        debugger;
        if (tndType == 1) {
            if (currencyList.filter(x => (x.Name).toLowerCase() == "usd").length > 0) {
                conversionRate = Number(currencyList.filter(x => (x.Name).toLowerCase() == "usd")[0].Value);
            }

            travelLB = ((noOfPersons * noOfDays * lodging) + (noOfPersons * fare)) * conversionRate;
            $("#TravelLBInd").val(travelLB.toFixed(0));
        }
        else {
            if (currencyList.filter(x => (x.Name).toLowerCase() == "euro").length > 0) {
                conversionRate = Number(currencyList.filter(x => (x.Name).toLowerCase() == "euro")[0].Value);
            }

            travelLB = ((noOfPersons * noOfDays * lodging) + (noOfPersons * fare)) * conversionRate;
            $("#TravelLBItaly").val(travelLB.toFixed(0));
        }

        $("#NoOfPersons").val(noOfPersons);
        $("#NoOfDays").val(noOfDays);
        $("#Fare").val(fare);
        $("#Lodging").val(lodging);
        SetTotal();
        $("#testmasterDtls").css('display', "none");
    }

    function CloseTravelLBModal() {
        $("#testmasterDtls").css('display', "none");
    }

</script>